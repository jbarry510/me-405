<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Lab 2 - Task Motor: adc Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Lab 2 - Task Motor
   &#160;<span id="projectnumber">0.001</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classadc-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">adc Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This define prevents this .H file from being included multiple times in a .CPP file.  
 <a href="classadc.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="adc_8h_source.html">adc.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af3b8262c08f5fc5ae325a20622883424"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadc.html#af3b8262c08f5fc5ae325a20622883424">adc</a> (emstream *=NULL)</td></tr>
<tr class="memdesc:af3b8262c08f5fc5ae325a20622883424"><td class="mdescLeft">&#160;</td><td class="mdescRight">This constructor sets up an A/D converter.  <a href="#af3b8262c08f5fc5ae325a20622883424">More...</a><br/></td></tr>
<tr class="separator:af3b8262c08f5fc5ae325a20622883424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2190a59696a7093e1ea605e998ccf97e"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadc.html#a2190a59696a7093e1ea605e998ccf97e">read_once</a> (uint8_t)</td></tr>
<tr class="memdesc:a2190a59696a7093e1ea605e998ccf97e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method takes one A/D reading from the given channel and returns it.  <a href="#a2190a59696a7093e1ea605e998ccf97e">More...</a><br/></td></tr>
<tr class="separator:a2190a59696a7093e1ea605e998ccf97e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f1030fe64d3dea4ccd8a2687dd6fce"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadc.html#a58f1030fe64d3dea4ccd8a2687dd6fce">read_oversampled</a> (uint8_t, uint8_t)</td></tr>
<tr class="memdesc:a58f1030fe64d3dea4ccd8a2687dd6fce"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method takes a set number of A/D readings from a given channel and averages them.  <a href="#a58f1030fe64d3dea4ccd8a2687dd6fce">More...</a><br/></td></tr>
<tr class="separator:a58f1030fe64d3dea4ccd8a2687dd6fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a14680b48b723bf1adddd2741ebb18a3e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14680b48b723bf1adddd2741ebb18a3e"></a>
emstream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadc.html#a14680b48b723bf1adddd2741ebb18a3e">ptr_to_serial</a></td></tr>
<tr class="memdesc:a14680b48b723bf1adddd2741ebb18a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ADC class uses this pointer to the serial port to say hello. <br/></td></tr>
<tr class="separator:a14680b48b723bf1adddd2741ebb18a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This define prevents this .H file from being included multiple times in a .CPP file. </p>
<p>This class <b>will</b> run the A/D converter on an AVR processor.</p>
<p>This class contains a pointer to the serial port, the constructor declaration for the A/D, a method that reads one sample of a A/D channel, and a method that reads a defined number of samples of a A/D channel. </p>

<p>Definition at line <a class="el" href="adc_8h_source.html#l00047">47</a> of file <a class="el" href="adc_8h_source.html">adc.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af3b8262c08f5fc5ae325a20622883424"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">adc::adc </td>
          <td>(</td>
          <td class="paramtype">emstream *&#160;</td>
          <td class="paramname"><em>p_serial_port</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This constructor sets up an A/D converter. </p>
<p>The constructor sets up the A/D converter for use. The "= NULL" part is a default parameter, meaning that if that parameter isn't given on the line where this constructor is called, the compiler will just fill in "NULL". In this case that has the effect of turning off diagnostic printouts</p>
<p>The A/D is made ready so that when a method such as <code><a class="el" href="classadc.html#a2190a59696a7093e1ea605e998ccf97e" title="This method takes one A/D reading from the given channel and returns it. ">read_once()</a></code> is called, correct A/D conversions can be performed. Enables the A/D converter, sets the clock prescaler to a divsion factor of 32, and selects reference voltage source as AVCC with external capactitor at AREF pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_serial_port</td><td>A pointer to the serial port which writes debugging info. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc_8cpp_source.html#l00042">42</a> of file <a class="el" href="adc_8cpp_source.html">adc.cpp</a>.</p>

<p>References <a class="el" href="adc_8h_source.html#l00051">ptr_to_serial</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2190a59696a7093e1ea605e998ccf97e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t adc::read_once </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method takes one A/D reading from the given channel and returns it. </p>
<p>This function reads one channel once, returning the result as an unsigned integer; it should be called from within a normal task, not an ISR</p>
<p>Forces the inputted channel to be a number from 0 to 7 then sets the ADMUX register to the correct channel. Next it starts the conversion and waits until it is finished. Finally it stores the result and returns it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>The A/D channel which is being read must be from 0 to 7 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of the A/D conversion </dd></dl>

<p>Definition at line <a class="el" href="adc_8cpp_source.html#l00073">73</a> of file <a class="el" href="adc_8cpp_source.html">adc.cpp</a>.</p>

<p>Referenced by <a class="el" href="adc_8cpp_source.html#l00141">operator&lt;&lt;()</a>, and <a class="el" href="adc_8cpp_source.html#l00106">read_oversampled()</a>.</p>

</div>
</div>
<a class="anchor" id="a58f1030fe64d3dea4ccd8a2687dd6fce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t adc::read_oversampled </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method takes a set number of A/D readings from a given channel and averages them. </p>
<p>This function reads the A/D lots of times and returns the average. Doing so implements a crude sort of low-pass filtering that can help reduce noise</p>
<p>Checks to see if number of samples inputted is above a threshold values then it takes samples and adds them up. Finally it returns the average of samples taken. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>The A/D channel which is being read </td></tr>
    <tr><td class="paramname">samples</td><td>Number of samples to take for averaging reading </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Averaged result of A/D readings </dd></dl>

<p>Definition at line <a class="el" href="adc_8cpp_source.html#l00106">106</a> of file <a class="el" href="adc_8cpp_source.html">adc.cpp</a>.</p>

<p>References <a class="el" href="adc_8cpp_source.html#l00073">read_once()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="adc_8h_source.html">adc.h</a></li>
<li><a class="el" href="adc_8cpp_source.html">adc.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 8 2016 16:46:27 for Lab 2 - Task Motor by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
