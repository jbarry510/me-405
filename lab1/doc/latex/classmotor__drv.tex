\hypertarget{classmotor__drv}{\section{motor\-\_\-drv Class Reference}
\label{classmotor__drv}\index{motor\-\_\-drv@{motor\-\_\-drv}}
}


This class will enable the H-\/bridge motor driver chips on the M\-E 405 board.  




{\ttfamily \#include $<$motor\-\_\-drv.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classmotor__drv_a13875fc8133ee2c8af383c4316278d84}{motor\-\_\-drv} (emstream $\ast$=N\-U\-L\-L, uint8\-\_\-t=0)
\begin{DoxyCompactList}\small\item\em This constructor sets up the motor object. \end{DoxyCompactList}\item 
void \hyperlink{classmotor__drv_a4b6d6fc9698bf76b9bf1bcbb660ad3b7}{set\-\_\-power} (int16\-\_\-t power)
\begin{DoxyCompactList}\small\item\em This method takes an integer and sets the motor torque and direction. \end{DoxyCompactList}\item 
void \hyperlink{classmotor__drv_ab9d99a1b71f8515240ff7748a16c937b}{brake\-\_\-full} ()
\begin{DoxyCompactList}\small\item\em This method causes the motor to brake fully. \end{DoxyCompactList}\item 
void \hyperlink{classmotor__drv_abf63b3c932b836bc3f97ebda5fd7e762}{brake} (uint8\-\_\-t strength)
\begin{DoxyCompactList}\small\item\em This method allows for the motor braking to be controlled. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classmotor__drv_a9cd3052255589d1849217279b4b6e337}{emstream $\ast$ {\bfseries ptr\-\_\-to\-\_\-serial}}\label{classmotor__drv_a9cd3052255589d1849217279b4b6e337}

\item 
\hypertarget{classmotor__drv_aca3c3dd889fd865607e312faf0e76c65}{uint8\-\_\-t {\bfseries select}}\label{classmotor__drv_aca3c3dd889fd865607e312faf0e76c65}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class will enable the H-\/bridge motor driver chips on the M\-E 405 board. 

The class has two protected variables, one pointer that is used to print debug messages to the serial port and an select variable that is used to choose the appropriate registers for controlling the motor. The driver has three methods available to the user. The set\-\_\-power method allows the user to set the power supplied to the motor on a scale of -\/255 to 255 where the positive values turn the motor {\bfseries clockwise} and negative values turn the motor {\bfseries counterclockwise}. The brake\-\_\-full method effectively stops power being supplied to the motor. The brake method sets P\-W\-M controlled braking for motor. 

Definition at line 35 of file motor\-\_\-drv.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classmotor__drv_a13875fc8133ee2c8af383c4316278d84}{\index{motor\-\_\-drv@{motor\-\_\-drv}!motor\-\_\-drv@{motor\-\_\-drv}}
\index{motor\-\_\-drv@{motor\-\_\-drv}!motor_drv@{motor\-\_\-drv}}
\subsubsection[{motor\-\_\-drv}]{\setlength{\rightskip}{0pt plus 5cm}motor\-\_\-drv\-::motor\-\_\-drv (
\begin{DoxyParamCaption}
\item[{emstream $\ast$}]{p\-\_\-serial\-\_\-port = {\ttfamily NULL}, }
\item[{uint8\-\_\-t}]{motor\-\_\-select = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{classmotor__drv_a13875fc8133ee2c8af383c4316278d84}


This constructor sets up the motor object. 

The timer for the P\-W\-M signal is set up in fast P\-W\-M 8-\/bit mode with a clock prescaler of 8 which gives an operating frequency of approximately 8k\-Hz. The data direction registers and output enables are set for the appropriate motor based on the select variable. A debug message is printed stating if the motor constructor was sucessful or not. 
\begin{DoxyParams}{Parameters}
{\em p\-\_\-serial\-\_\-port} & A pointer to the serial port which writes debugging info. \\
\hline
{\em motor\-\_\-select} & Selects desired motor driver chip. \\
\hline
\end{DoxyParams}


Definition at line 28 of file motor\-\_\-drv.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{classmotor__drv_abf63b3c932b836bc3f97ebda5fd7e762}{\index{motor\-\_\-drv@{motor\-\_\-drv}!brake@{brake}}
\index{brake@{brake}!motor_drv@{motor\-\_\-drv}}
\subsubsection[{brake}]{\setlength{\rightskip}{0pt plus 5cm}void motor\-\_\-drv\-::brake (
\begin{DoxyParamCaption}
\item[{uint8\-\_\-t}]{strength}
\end{DoxyParamCaption}
)}}\label{classmotor__drv_abf63b3c932b836bc3f97ebda5fd7e762}


This method allows for the motor braking to be controlled. 

The H-\/bridge chip for the corresponding motor is set to operating mode brake to G\-N\-D which allows for the use of the P\-W\-M signal to vary the braking strength. 
\begin{DoxyParams}{Parameters}
{\em strength} & Variable that sets amount of motor braking (must be between -\/255 and 255). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}


Definition at line 176 of file motor\-\_\-drv.\-cpp.

\hypertarget{classmotor__drv_ab9d99a1b71f8515240ff7748a16c937b}{\index{motor\-\_\-drv@{motor\-\_\-drv}!brake\-\_\-full@{brake\-\_\-full}}
\index{brake\-\_\-full@{brake\-\_\-full}!motor_drv@{motor\-\_\-drv}}
\subsubsection[{brake\-\_\-full}]{\setlength{\rightskip}{0pt plus 5cm}void motor\-\_\-drv\-::brake\-\_\-full (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classmotor__drv_ab9d99a1b71f8515240ff7748a16c937b}


This method causes the motor to brake fully. 

The H-\/bridge chip for the corresponding motor is set to operating mode brake to Vcc which effectively removes power from the motor causing it to brake. \begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}


Definition at line 151 of file motor\-\_\-drv.\-cpp.

\hypertarget{classmotor__drv_a4b6d6fc9698bf76b9bf1bcbb660ad3b7}{\index{motor\-\_\-drv@{motor\-\_\-drv}!set\-\_\-power@{set\-\_\-power}}
\index{set\-\_\-power@{set\-\_\-power}!motor_drv@{motor\-\_\-drv}}
\subsubsection[{set\-\_\-power}]{\setlength{\rightskip}{0pt plus 5cm}void motor\-\_\-drv\-::set\-\_\-power (
\begin{DoxyParamCaption}
\item[{int16\-\_\-t}]{power}
\end{DoxyParamCaption}
)}}\label{classmotor__drv_a4b6d6fc9698bf76b9bf1bcbb660ad3b7}


This method takes an integer and sets the motor torque and direction. 

The value of the integer corresponds to the amount of torque applied by the motor. The sign of the integer corresponds to the direction the motor turns. Negative values turn the motor {\bfseries clockwise} and positive values turn the motor {\bfseries counterclockwise}. 
\begin{DoxyParams}{Parameters}
{\em power} & Variable that sets power output to motor (must be between -\/255 and 255). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}


Definition at line 91 of file motor\-\_\-drv.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
\hyperlink{motor__drv_8h}{motor\-\_\-drv.\-h}\item 
\hyperlink{motor__drv_8cpp}{motor\-\_\-drv.\-cpp}\end{DoxyCompactItemize}
